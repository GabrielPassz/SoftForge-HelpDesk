@model PIM_FINAL.Models.EditUsuarioViewModel @* Modelo com dados e selects *@
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers @* TagHelpers *@
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" /> @* Codificação *@
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> @* Responsivo *@
<title>Editar Usuário - SoftForge HelpDesk</title> @* Título *@
<link rel="stylesheet" href="/css/dbtestes.css" /> @* Estilos *@
</head>
<body>
<div class="db-page container-fluid"> @* Container principal *@
 @await Html.PartialAsync("_HeaderNav") @* Navegação *@

 <main class="db-content"> @* Conteúdo *@
 <section class="db-section db-overview"> @* Cabeçalho *@
 <h2>Editar Usuário</h2>
 </section>

 <section class="db-section db-form"> @* Formulário *@
 <form method="post" asp-controller="Site" asp-action="EditarUsuario" asp-route-id="@Model.UsuarioId"> @* Post para atualizar usuário *@
 <div class="mb-3">
 <label for="NomeCompleto">Nome completo</label>
 <input type="text" id="NomeCompleto" name="NomeCompleto" value="@Model.NomeCompleto" required class="form-control" />
 </div>
 <div class="mb-3">
 <label for="Email">E-mail</label>
 <input type="email" id="Email" name="Email" value="@Model.Email" required class="form-control" />
 </div>
 <div class="mb-3">
 <label for="PerfilId">Perfil</label>
 <select id="PerfilId" name="PerfilId" class="form-select"> @* Select de perfis *@
 <option value="">(não definido)</option>
 @foreach(var p in Model.Perfis)
 {
 if (p.Value == (Model.PerfilId?.ToString() ?? ""))
 {
 <option value="@p.Value" selected>@p.Text</option>
 }
 else
 {
 <option value="@p.Value">@p.Text</option>
 }
 }
 </select>
 </div>
 <div class="mb-3">
 <label for="DepartamentoId">Departamento</label>
 <select id="DepartamentoId" name="DepartamentoId" class="form-select"> @* Select de departamentos *@
 <option value="">(não definido)</option>
 @foreach(var d in Model.Departamentos)
 {
 if (d.Value == (Model.DepartamentoId?.ToString() ?? ""))
 {
 <option value="@d.Value" selected>@d.Text</option>
 }
 else
 {
 <option value="@d.Value">@d.Text</option>
 }
 }
 </select>
 </div>
 <div class="mb-3">
 <label for="NewPassword">Nova senha (opcional)</label>
 <input type="password" id="NewPassword" name="NewPassword" class="form-control" /> @* Se preenchida, troca a senha *@
 </div>
 <div class="db-actions"> @* Botões *@
 <button type="submit" class="btn btn-primary">Salvar</button>
 <a class="btn btn-secondary" href="/Site/GerenciarUsuarios">Cancelar</a>
 </div>
 </form>
 </section>
 </main>

 <div class="db-footer"> @* Rodapé *@
 <footer>
 <p>©2025 SoftForge - Todos os direitos reservados</p>
 </footer>
 </div>
</div>
</body>
</html>