@model IEnumerable<PIM_FINAL.Models.Chamado> @* Coleção de chamados para atendimento *@
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers @* Habilita TagHelpers *@
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" /> @* Codificação *@
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> @* Responsivo *@
<title>Atendimento - SoftForge HelpDesk</title> @* Título *@
<link rel="stylesheet" href="/css/dbtestes.css" /> @* Estilos *@
</head>
<body>
<div class="db-page container-fluid db-atendimento"> @* Container principal *@
 @await Html.PartialAsync("_HeaderNav") @* Cabeçalho/menu *@

 <main class="db-content"> @* Conteúdo *@
 <section class="db-section db-overview"> @* Cabeçalho da seção *@
 <h2>Atendimento de Chamados</h2>
 <p><strong>Técnico:</strong> @User.Identity.Name</p> @* Mostra técnico atual *@
 </section>

 <section class="db-section db-andamento"> @* Lista de chamados *@
 <h3>Chamados disponíveis/atribuídos</h3>
 <table class="table table-bordered w-100 stack-mobile limit-rows" data-limit="3"> @* Tabela com limitação de linhas via JS *@
 <thead>
 <tr>
 <th>Protocolo</th>
 <th>Título</th>
 <th>Prioridade</th>
 <th>Categoria</th>
 <th>Setor</th>
 <th>Tempo Decorrido</th>
 <th>Ações</th>
 </tr>
 </thead>
 <tbody>
 @foreach(var c in Model)
 {
 <tr>
 <td data-label="Protocolo"><span class="cell-val"><strong>@(c.Protocolo ?? "#")</strong></span></td>
 <td data-label="Título"><span class="cell-val">@c.Titulo</span></td>
 <td data-label="Prioridade"><span class="cell-val">@(c.Prioridade?.NomePrioridade ?? "-")</span></td>
 <td data-label="Categoria"><span class="cell-val">@(c.Categoria?.NomeCategoria ?? "-")</span></td>
 <td data-label="Setor"><span class="cell-val">@(c.UsuarioSolicitante?.Departamento?.NomeDepartamento ?? "-")</span></td>
 <td data-label="Tempo Decorrido"><span class="cell-val">@(c.DataAbertura?.ToLocalTime().ToString("g") ?? "-")</span></td>
 <td data-label="Ações"><span class="cell-val">
 <a asp-controller="Site" asp-action="DetalhesChamado" asp-route-id="@c.ChamadoId" style="display:inline" class="btn btn-primary btn-sm">Iniciar atendimento</a> @* Navega para detalhes do chamado *@
 </span></td>
 </tr>
 }
 </tbody>
 </table>
 </section>

 </main>

 <div class="db-footer"> @* Rodapé *@
 <footer>
 <p>©2025 SoftForge - Todos os direitos reservados</p>
 </footer>
 </div>
</div>
</body>
</html>
