// Opt-in list/table limiter. Apply only to elements with class 'limit-rows' or a 'data-limit' attribute.
(function(){
 const LIMIT =3;
 function makeButton(){
 const btn = document.createElement('button');
 btn.type = 'button';
 btn.className = 'btn btn-sm btn-secondary limit-toggle';
 btn.textContent = 'Mostrar mais';
 return btn;
 }
 function applyToList(list){
 const items = Array.from(list.children);
 if(items.length <= LIMIT) return;
 const hidden = items.slice(LIMIT);
 hidden.forEach(li => li.style.display = 'none');
 const btn = makeButton();
 btn.addEventListener('click', () => {
 const expanded = hidden[0].style.display !== 'none';
 hidden.forEach(li => li.style.display = expanded ? 'none' : 'list-item');
 btn.textContent = expanded ? 'Mostrar mais' : 'Mostrar menos';
 });
 const wrap = document.createElement('div');
 wrap.appendChild(btn);
 list.parentNode.insertBefore(wrap, list.nextSibling);
 }
 function applyToTable(table){
 const tb = table.querySelector('tbody') || table;
 const rows = Array.from(tb.querySelectorAll('tr'));
 if(rows.length <= LIMIT) return;
 const hidden = rows.slice(LIMIT);
 hidden.forEach(r => r.style.display = 'none');
 const btn = makeButton();
 btn.addEventListener('click', () => {
 const expanded = hidden[0].style.display !== 'none';
 hidden.forEach(r => r.style.display = expanded ? 'none' : 'table-row');
 btn.textContent = expanded ? 'Mostrar mais' : 'Mostrar menos';
 });
 const footerHost = table.parentNode;
 const wrap = document.createElement('div');
 wrap.className = 'limit-wrap';
 wrap.style.marginTop = '4px';
 wrap.appendChild(btn);
 footerHost.appendChild(wrap);
 }
 document.addEventListener('DOMContentLoaded', () => {
 // Lists
 document.querySelectorAll('ul:not(.no-limit), ol:not(.no-limit)').forEach(applyToList);
 // Tables
 document.querySelectorAll('table:not(.no-limit)').forEach(applyToTable);
 });
})();