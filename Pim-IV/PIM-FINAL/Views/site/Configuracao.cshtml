@* Página Configuracao: painel administrativo para listar e acessar edições de Departamentos e Perfis de Usuário. Blocos: Cabeçalho, Tabela de Departamentos, Tabela de Perfis. *@
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
 ViewData["Title"] = "Configuração";
 var deps = ViewBag.Departamentos as List<PIM_FINAL.Models.Departamento> ?? new List<PIM_FINAL.Models.Departamento>();
 var perfis = ViewBag.Perfis as List<PIM_FINAL.Models.PerfilUsuario> ?? new List<PIM_FINAL.Models.PerfilUsuario>();
}

<!DOCTYPE html>
<html lang="pt-BR">
 <head>
 <meta charset="utf-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>Configuração - SoftForge HelpDesk</title>
 <link rel="stylesheet" href="/css/dbtestes.css" />
 </head>
 <body>
<div class="db-page container-fluid db-configuracao">
 @await Html.PartialAsync("_HeaderNav")

 <main class="db-content">
 <section class="db-section db-overview">
 <h2>⚙️ Configuração do Sistema</h2>
 <p><strong>Administrador:</strong> @User?.Identity?.Name</p>
 <div class="mb-2">
 <a asp-controller="Departamento" asp-action="Create" class="btn btn-sm btn-primary">Novo Departamento</a>
 <a asp-controller="PerfilUsuario" asp-action="Create" class="btn btn-sm btn-primary">Novo Perfil</a>
 </div>
 </section>

 <section class="db-section"> @* Lista de departamentos com links completos *@
 <h3>Departamentos</h3>
 <table class="table table-bordered w-100 stack-mobile limit-rows" data-limit="10">
 <thead><tr><th>ID</th><th>Departamento</th><th>Descrição</th><th>Ações</th></tr></thead>
 <tbody>
 @foreach(var d in deps)
 {
 <tr>
 <td data-label="ID"><span class="cell-val">@d.DepartamentoId</span></td>
 <td data-label="Departamento"><span class="cell-val">@d.NomeDepartamento</span></td>
 <td data-label="Descrição"><span class="cell-val">@d.Descricao</span></td>
 <td data-label="Ações">
 <span class="cell-val">
 <a asp-controller="Departamento" asp-action="Details" asp-route-id="@d.DepartamentoId">Detalhes</a> |
 <a asp-controller="Departamento" asp-action="Edit" asp-route-id="@d.DepartamentoId">Editar</a> |
 <a asp-controller="Departamento" asp-action="Delete" asp-route-id="@d.DepartamentoId">Excluir</a>
 </span>
 </td>
 </tr>
 }
 @if(!deps.Any()) { <tr><td colspan="4" class="text-center">Nenhum departamento cadastrado.</td></tr> }
 </tbody>
 </table>
 </section>

 <section class="db-section"> @* Lista de perfis com links completos *@
 <h3>Perfis de Usuário</h3>
 <table class="table table-bordered w-100 stack-mobile limit-rows" data-limit="10">
 <thead><tr><th>ID</th><th>Perfil</th><th>Descrição</th><th>Ações</th></tr></thead>
 <tbody>
 @foreach(var p in perfis)
 {
 <tr>
 <td data-label="ID"><span class="cell-val">@p.PerfilId</span></td>
 <td data-label="Perfil"><span class="cell-val">@p.NomePerfil</span></td>
 <td data-label="Descrição"><span class="cell-val">@p.Descricao</span></td>
 <td data-label="Ações">
 <span class="cell-val">
 <a asp-controller="PerfilUsuario" asp-action="Details" asp-route-id="@p.PerfilId">Detalhes</a> |
 <a asp-controller="PerfilUsuario" asp-action="Edit" asp-route-id="@p.PerfilId">Editar</a> |
 <a asp-controller="PerfilUsuario" asp-action="Delete" asp-route-id="@p.PerfilId">Excluir</a>
 </span>
 </td>
 </tr>
 }
 @if(!perfis.Any()) { <tr><td colspan="4" class="text-center">Nenhum perfil cadastrado.</td></tr> }
 </tbody>
 </table>
 </section>

 </main>

 <div class="db-footer">
 <footer>
 <p>&copy;2025 SoftForge - Todos os direitos reservados</p>
 </footer>
 </div>
 </div>
 </body>
</html>